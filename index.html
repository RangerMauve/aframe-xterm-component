<!doctype html>
<title>aframe-xterm-component</title>
<link rel="stylesheet" href="https://unpkg.com/xterm@3.12.0/dist/xterm.css" />
<script src="https://unpkg.com/xterm@3.12.0/dist/xterm.js"></script>
<script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
<script type="text/javascript" src="aframe-xterm-component.js"></script>
<script type="text/javascript">

AFRAME.registerComponent('xterm-example', {
  dependencies: ['b'],
  init: function() {
    const message = `Hello from \x1B[1;3;31m WebVR \x1B[0m!\r\nLook at or click on the terminal and type with your keyboard.\r\n$ `
    const xterm = this.el.components['xterm']

    xterm.write(message)

    // Listen on data, write it to the terminal
    xterm.term.on('data', (data) => {
      data = data.replace('\r', '\r\n')
      xterm.write(data)
    })
  }
})
</script>
<a-scene>
  <a-entity
    xterm="echo: true;"
    xterm-example
    geometry="primitive: plane; width: 4; height: 2"
    position="0 2 -3"
  ></a-entity>

  <a-entity camera look-controls wasd-controls position="0 1.6 0">
    <a-entity cursor="fuse: true; fuseTimeout: 500"
              position="0 0 -1"
              geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
              material="color: white; shader: flat"
              laser-controls="hand: right"
    ></a-entity>
  </a-entity>
  <a-sky color="#101010"></a-sky>
</a-scene>
